{"version":3,"file":"js/915.50b3f1be.js","mappings":"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","sources":["webpack://mymihua/./src/views/AuthorityView.vue","webpack://mymihua/src/views/AuthorityView.vue","webpack://mymihua/./src/views/AuthorityView.vue?19e6","webpack://mymihua/./src/views/AuthorityView.vue?6eff"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"authority-view\"},[_c('div',{staticClass:\"authority-view-top\"},[_c('div',{staticClass:\"top-left\"},[_vm._m(0),_c('el-input',{staticStyle:{\"width\":\"350px\"},attrs:{\"placeholder\":\"请输入内容\"},on:{\"input\":_vm.sousuo},model:{value:(_vm.input1),callback:function ($$v) {_vm.input1=$$v},expression:\"input1\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},slot:\"append\"})],1)],1),_c('div',[_c('el-button',{staticClass:\"el-icon-plus\",staticStyle:{\"margin-left\":\"30px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addinfo}},[_vm._v(\"添加系统角色\")]),_c('el-dialog',{attrs:{\"title\":\"角色操作\",\"visible\":_vm.dialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.handleClose}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"label-width\":\"100px\",\"prop\":\"rolename\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入1-20个字符\"},model:{value:(_vm.form.rolename),callback:function ($$v) {_vm.$set(_vm.form, \"rolename\", $$v)},expression:\"form.rolename\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述\",\"label-width\":\"100px\",\"prop\":\"describe\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入修改描述\"},model:{value:(_vm.form.describe),callback:function ($$v) {_vm.$set(_vm.form, \"describe\", $$v)},expression:\"form.describe\"}})],1),_c('el-form-item',{attrs:{\"label\":\"是否启用\",\"label-width\":\"100px\",\"prop\":\"status\"}},[_c('el-radio-group',{model:{value:(_vm.form.status),callback:function ($$v) {_vm.$set(_vm.form, \"status\", $$v)},expression:\"form.status\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"启用\")]),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"停用\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"权限配置\"}},[_c('div',{staticStyle:{\"border\":\"1px solid #ebebeb\"}},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.data,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"id\",\"highlight-current\":\"\",\"props\":_vm.defaultProps}})],1)])],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmEdit}},[_vm._v(\"确 定\")])],1)],1)],1)]),_c('div',{staticClass:\"table\"},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\"}}),_c('el-table-column',{attrs:{\"label\":\"角色名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.rolename))]}}])}),_c('el-table-column',{attrs:{\"label\":\"角色描述\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.describe))]}}])}),_c('el-table-column',{attrs:{\"label\":\"角色权限配置\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{staticClass:\"power-cell\"},[_vm._v(_vm._s(_vm.getNamesByIds(_vm.set_arr, scope.row.powers)))])}}])}),_c('el-table-column',{attrs:{\"label\":\"角色启用状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{staticStyle:{\"display\":\"flex\",\"width\":\"80px\"}},[_c('div',{class:scope.row.status === 0 ? 'status-on' : 'status-off',staticStyle:{\"width\":\"8px\",\"height\":\"8px\",\"border-radius\":\"50%\",\"margin-top\":\"8px\",\"margin-right\":\"8px\"}}),_c('span',[_vm._v(_vm._s(scope.row.status ? \"开启\" : \"停用\"))])])}}])}),_c('el-table-column',{attrs:{\"label\":\"最后编辑时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm.formatDate(scope.row.lasttime)))]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-edit\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}}),_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}}),_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":scope.row.status === 0 ? 'el-icon-switch-button' : 'el-icon-video-play',\"circle\":\"\"},on:{\"click\":function($event){return _vm.handleStatus(scope.$index, scope.row)}}})]}}])})],1),_c('div',{staticClass:\"block\"},[_c('el-pagination',{attrs:{\"layout\":\"total, sizes, prev, pager, next, jumper\",\"page-size\":_vm.pagesize,\"total\":_vm.pagecount},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('span',{staticClass:\"el-dropdown-link\",staticStyle:{\"display\":\"inline-block\",\"padding\":\"5px\",\"text-align\":\"center\",\"width\":\"100px\",\"height\":\"25px\",\"background-color\":\"rgb(233, 243, 251)\",\"margin-right\":\"20px\"}},[_vm._v(\" 客户测\"),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\",staticStyle:{\"margin-left\":\"30px\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"authority-view\">\r\n        <div class=\"authority-view-top\">\r\n            <div class=\"top-left\">\r\n                <span class=\"el-dropdown-link\"\r\n                    style=\"display: inline-block;padding:5px; text-align: center; width:100px; height: 25px;background-color:rgb(233, 243, 251);margin-right: 20px\">\r\n                    客户测<i class=\"el-icon-arrow-down el-icon--right\" style=\"margin-left:30px;\"></i>\r\n                </span>\r\n                <el-input style=\"width:350px;\" placeholder=\"请输入内容\" @input=\"sousuo\" v-model=\"input1\">\r\n                    <el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\r\n                </el-input>\r\n            </div>\r\n            <div>\r\n                <el-button type=\"primary\" class=\"el-icon-plus\" @click=\"addinfo\"\r\n                    style=\"margin-left:30px;\">添加系统角色</el-button>\r\n                <!-- 弹出层内容 -->\r\n                <el-dialog title=\"角色操作\" :visible.sync=\"dialogVisible\" width=\"30%\" @close=\"handleClose\">\r\n                    <!-- 输入表单 -->\r\n                    <el-form :model=\"form\" :rules=\"rules\" ref=\"form\">\r\n                        <el-form-item label=\"角色名称\" label-width=\"100px\" prop=\"rolename\">\r\n                            <el-input v-model=\"form.rolename\" placeholder=\"请输入1-20个字符\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"描述\" label-width=\"100px\" prop=\"describe\">\r\n                            <el-input v-model=\"form.describe\" placeholder=\"请输入修改描述\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"是否启用\" label-width=\"100px\" prop=\"status\">\r\n                            <el-radio-group v-model=\"form.status\">\r\n                                <el-radio :label=\"1\">启用</el-radio>\r\n                                <el-radio :label=\"0\">停用</el-radio>\r\n                            </el-radio-group>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"权限配置\">\r\n                            <div style=\"border: 1px solid #ebebeb;\">\r\n                                <el-tree :data=\"data\" show-checkbox default-expand-all node-key=\"id\" ref=\"tree\"\r\n                                    highlight-current :props=\"defaultProps\">\r\n                                </el-tree>\r\n                            </div>\r\n                        </el-form-item>\r\n                    </el-form>\r\n\r\n                    <!-- 底部操作按钮 -->\r\n                    <span slot=\"footer\" class=\"dialog-footer\">\r\n                        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n                        <el-button type=\"primary\" @click=\"confirmEdit\">确 定</el-button>\r\n                    </span>\r\n                </el-dialog>\r\n                <!-- 弹出层内容 -->\r\n            </div>\r\n        </div>\r\n        <div class=\"table\">\r\n            <el-table ref=\"multipleTable\" :data=\"tableData\" tooltip-effect=\"dark\" style=\"width: 100%\"\r\n                @selection-change=\"handleSelectionChange\">\r\n                <el-table-column type=\"selection\">\r\n                </el-table-column>\r\n                <el-table-column label=\"角色名称\">\r\n                    <template slot-scope=\"scope\">{{ scope.row.rolename }}</template>\r\n                </el-table-column>\r\n                <el-table-column label=\"角色描述\">\r\n                    <template slot-scope=\"scope\">{{ scope.row.describe }}</template>\r\n                </el-table-column>\r\n                <el-table-column label=\"角色权限配置\">\r\n                    <div slot-scope=\"scope\" class=\"power-cell\">{{ getNamesByIds(set_arr, scope.row.powers)\r\n                        }}</div>\r\n                </el-table-column>\r\n                <el-table-column label=\"角色启用状态\">\r\n                    <div slot-scope=\"scope\" style=\"display: flex;width: 80px\">\r\n                        <div :class=\"scope.row.status === 0 ? 'status-on' : 'status-off'\" style=\"width: 8px;height: 8px;border-radius: 50%; margin-top: 8px; margin-right:8px; \"></div>\r\n                        <span>{{ scope.row.status ? \"开启\" : \"停用\" }}</span>\r\n                    </div>\r\n                </el-table-column>\r\n                <el-table-column label=\"最后编辑时间\">\r\n                    <template slot-scope=\"scope\">{{ formatDate(scope.row.lasttime) }}</template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button icon=\"el-icon-edit\" circle size=\"mini\"\r\n                            @click=\"handleEdit(scope.$index, scope.row)\"></el-button>\r\n                        <el-button size=\"mini\" icon=\"el-icon-delete\" circle\r\n                            @click=\"handleDelete(scope.$index, scope.row)\"></el-button>\r\n                        <el-button size=\"mini\"\r\n                            :icon=\"scope.row.status === 0 ? 'el-icon-switch-button' : 'el-icon-video-play'\" circle\r\n                            @click=\"handleStatus(scope.$index, scope.row)\"></el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <!-- <div style=\"margin-top: 20px\">\r\n                <el-button @click=\"toggleSelection([tableData[1], tableData[2]])\">切换第二、第三行的选中状态</el-button>\r\n                <el-button @click=\"toggleSelection()\">取消选择</el-button>\r\n            </div> -->\r\n            <div class=\"block\">\r\n                <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\" :page-size=\"pagesize\" :total=\"pagecount\">\r\n                </el-pagination>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { GetRoleList, Adduser, deleteRole, updateRole, search, setRole, SetStatus } from \"@/api/https\"\r\nexport default {\r\n    data() {\r\n        return {\r\n            // 树形数据\r\n            data: [{\r\n                id: 0,\r\n                label: \"开放所有权限\",\r\n                children: [{ id: 1, label: '首页', },\r\n                { id: 2, label: '企业管理', },\r\n                {\r\n                    id: 3, label: '通话统计',\r\n                    children: [{ id: 4, label: '并发统计' }]\r\n                },\r\n                {\r\n                    id: 5,\r\n                    label: \"权限管理\",\r\n                    children: [\r\n                        { id: 6, label: '系统角色管理' },\r\n                        { id: 7, label: '系统用户管理' },\r\n                    ]\r\n                },\r\n                {\r\n                    id: 8, label: \"系统配置\",\r\n                    children: [\r\n                        { id: 9, label: '呼转计费' },\r\n                        { id: 10, label: '客户端版本维护' },\r\n                    ]\r\n                }],\r\n            }],\r\n            defaultProps: {\r\n                children: 'children',\r\n                label: 'label'\r\n            },\r\n            // //树形数据\r\n\r\n            //弹出层\r\n            dialogVisible: false,\r\n            //设置个id\r\n            id: \"\",\r\n            //弹出层表单\r\n            form: {\r\n                rolename: \"\",\r\n                describe: \"\",\r\n                powers: '',\r\n                status: \"\"\r\n            },\r\n            //弹出层表单验证\r\n            rules: {\r\n                rolename: [\r\n                    { required: true, message: '角色名称不能为空', trigger: 'blur' },\r\n                    { min: 1, max: 20, message: '角色名称长度应在1-20个字符之间', trigger: 'blur' }\r\n                ],\r\n                describe: [\r\n                    { required: true, message: '描述不能为空', trigger: 'blur' }\r\n                ],\r\n                status: [\r\n                    { required: true, message: '请选择是否启用', trigger: 'change' }\r\n                ] \r\n            },\r\n            input1: '',\r\n            tableData: [],\r\n            multipleSelection: [],\r\n            pagecount: 0,\r\n            search: '',\r\n            //存储角色权限请求数据\r\n            set_arr: [],\r\n            //每页显示条目个数，支持 .sync 修饰符，好像没用到\r\n            pagesize:0,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.GetRol(),\r\n        this.setRol()\r\n    },\r\n    methods: {\r\n        //角色启用接口调用\r\n        SetStatusOFF(data) {\r\n            SetStatus(data).then(res => {\r\n                console.log(res);\r\n                this.GetRol()\r\n            })\r\n        },\r\n        //启用状态按钮\r\n        handleStatus(index,row) {\r\n            console.log(index, row);\r\n            this.SetStatusOFF({\r\n                id: row.id,\r\n                status: row.status == 1 ? 0 : 1\r\n            })\r\n        },\r\n        //权限设置存储的变量\r\n        setRol() {\r\n            setRole().then(res => {\r\n                this.set_arr = res.data.data\r\n            })\r\n        },\r\n        //树形数据处理\r\n        getNamesByIds(array, idsString) {\r\n            // 将输入的逗号分隔的字符串转换为整数数组\r\n            const idsArray = idsString.split(',').map(id => parseInt(id.trim()));\r\n\r\n            // 用于存储匹配到的名字\r\n            let matchedNames = [];\r\n\r\n            // 遍历原始数组\r\n            array.forEach(item => {\r\n                // 检查当前项的id是否在idsArray中\r\n                if (idsArray.includes(item.id)) {\r\n                    // 如果包含，将名字添加到matchedNames数组中\r\n                    matchedNames.push(item.name);\r\n                }\r\n            });\r\n\r\n            // 将匹配到的名字用逗号连接成一个新的字符串并返回\r\n            return matchedNames.join(', ');\r\n        },\r\n        //树形数据\r\n        getCheckedKeys() {\r\n            console.log(this.$refs.tree.getCheckedKeys());\r\n            let checkedKeysArray = this.$refs.tree.getCheckedKeys(); // 假设这是一个数组\r\n            let checkedKeysString = checkedKeysArray.join(','); // 使用逗号将数组元素连接成字符串\r\n            console.log(checkedKeysString);\r\n            return checkedKeysString;\r\n        },\r\n       \r\n        //搜索框搜索\r\n        sousuo() {\r\n            let obj = {rolename: this.input1}\r\n            search(obj).then(res => {\r\n                console.log(res);\r\n                this.tableData = res.data.data\r\n            })\r\n        },\r\n        //通过key选中角色信息，修改时回显\r\n        setCheckedKeys(data) {\r\n          this.$refs.tree.setCheckedKeys(data);\r\n        },\r\n        //修改事件\r\n        handleEdit(index, row) {\r\n            console.log(index, row);\r\n            this.form = {\r\n                rolename: row.rolename,\r\n                describe: row.describe,\r\n                status: row.status\r\n            }\r\n            this.dialogVisible = true\r\n            this.id = row.id\r\n            console.log(this.id);\r\n            // 将逗号分隔的字符串转换为数组\r\n            this.form.powers = row.powers.split(',');\r\n            // 更新form.powers的值\r\n            console.log(this.form.powers);\r\n            //调用树形控件方法实现点击修改之后自动回显上去\r\n            this.$nextTick(() => {\r\n                this.setCheckedKeys(this.form.powers);\r\n            });\r\n        },\r\n        //修改的请求\r\n        updateRo(id, data) {\r\n            updateRole(id, data).then((res) => {\r\n                console.log(res,22222);\r\n                if (res.msg === \"修改成功\") { // 假设res.success表示操作成功\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: '修改成功!',\r\n                    });\r\n                    this.GetRol(); // 获取最新的角色信息\r\n                    this.dialogVisible = false; // 关闭对话框\r\n                } else {\r\n                    this.$message.error('修改失败，请稍后重试!');\r\n                }\r\n            }).catch((error) => {\r\n                console.error('更新角色信息时发生错误:', error);\r\n                this.$message.error('修改失败，请稍后重试!');\r\n                this.dialogVisible = false; // 在出现错误时也关闭对话框\r\n            });\r\n        },\r\n        //删除事件\r\n        handleDelete(index, row) {\r\n            console.log(index, row);\r\n            console.log(index, row);\r\n            this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.tableData.splice(index, 1);\r\n                //框架自带参数\r\n                this.deleteRo(row.id)\r\n                this.$message({\r\n                    type: 'success',\r\n                    message: '删除成功!'\r\n                });\r\n            }).catch(() => {\r\n                this.$message({\r\n                    type: 'info',\r\n                    message: '已取消删除'\r\n                });\r\n            });\r\n        },\r\n        //时间戳转换\r\n        formatDate(timestamp) {\r\n            // 如果时间戳是以秒为单位的，将其乘以 1000 转换为毫秒\r\n            const milliseconds = timestamp * 1000;\r\n            const date = new Date(milliseconds);\r\n            const year = date.getFullYear();\r\n            const month = String(date.getMonth() + 1).padStart(2, \"0\"); // Month starts from 0\r\n            const day = String(date.getDate()).padStart(2, \"0\");\r\n            return `${year}-${month}-${day}`;\r\n        },\r\n        //删除请求\r\n        deleteRo(id) {\r\n            deleteRole(id).then(res => {\r\n                console.log(res);\r\n            })\r\n        },\r\n        //取消选择，\r\n        toggleSelection(rows) {\r\n            if (rows) {\r\n                rows.forEach(row => {\r\n                    this.$refs.multipleTable.toggleRowSelection(row);\r\n                });\r\n            } else {\r\n                this.$refs.multipleTable.clearSelection();\r\n            }\r\n        },\r\n        //表单选中事件\r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val;\r\n        },\r\n        //列表接口获取，加设置分页器\r\n        GetRol(page) {\r\n            GetRoleList(page).then(res => {\r\n                console.log(res.data);\r\n                this.tableData = res.data.data\r\n                this.pagecount = res.data.pagecount\r\n            })\r\n        },\r\n        //分页\r\n        handleSizeChange(val) {\r\n            this.GetRol({ pagelimit : val })\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.GetRol({ page: val })\r\n        },\r\n        // 弹出层\r\n        handleClose() {\r\n            // 可以在这里重置表单或执行关闭对话框后的其他操作\r\n        },\r\n        //添加按钮事件\r\n        addinfo() {\r\n            this.dialogVisible = true\r\n        },\r\n        //添加接口\r\n        Adduserinfo(data) {\r\n            Adduser(data).then(res => {\r\n                console.log(res);\r\n            }).then((res) => {\r\n                if (res && res.msg === '系统角色添加成功') {\r\n                    this.GetRol();\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: '添加成功!',\r\n                    });\r\n                } else {\r\n                    this.$message.error(`添加失败!`);\r\n                }\r\n                this.dialogVisible = false; // 关闭对话框\r\n            }).catch((error) => {\r\n                console.error('添加用户信息时发生错误:', error);\r\n                this.$message.error('添加失败，请稍后重试!');\r\n                this.dialogVisible = false; // 在出现错误时也关闭对话框\r\n            });\r\n        },\r\n        //弹出层点击提交修改事件\r\n        confirmEdit() {\r\n            if (!this.id) {\r\n                // 你的表单数据\r\n                console.log(this.form);\r\n                this.Adduserinfo({\r\n                    rolename: this.form.rolename,\r\n                    describe: this.form.describe,\r\n                    powers: this.getCheckedKeys(),\r\n                    status: this.form.status,\r\n                })\r\n            } else {\r\n                this.updateRo(this.id, {\r\n                    id: this.id,\r\n                    rolename: this.form.rolename,\r\n                    describe: this.form.describe,\r\n                    powers: this.getCheckedKeys(),\r\n                    status: this.form.status,\r\n                })\r\n                this.GetRol()\r\n                this.dialogVisible = false; // 关闭对话框\r\n            }\r\n            // 这里还可以添加保存数据到服务器的逻辑\r\n            // 添加的axions\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.status-on{\r\n    background-color: red;\r\n}\r\n.status-off{\r\n    background-color:rgb(56, 216, 143);\r\n}\r\n.power-cell {\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    max-width: 200px;\r\n    /* 或者你希望的其他宽度 */\r\n}\r\n.authority-view-top {\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n}\r\n\r\n.authority-view {\r\n    width: 100%-40px;\r\n    padding: 20px;\r\n    margin: 20px;\r\n    background-color: rgb(255, 255, 255);\r\n    box-sizing: border-box;\r\n}\r\n\r\n.el-select .el-input {\r\n    width: 130px;\r\n}\r\n\r\n.input-with-select .el-input-group__prepend {\r\n    background-color: #fff;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AuthorityView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AuthorityView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AuthorityView.vue?vue&type=template&id=29144017&scoped=true\"\nimport script from \"./AuthorityView.vue?vue&type=script&lang=js\"\nexport * from \"./AuthorityView.vue?vue&type=script&lang=js\"\nimport style0 from \"./AuthorityView.vue?vue&type=style&index=0&id=29144017&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29144017\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_m","staticStyle","attrs","on","sousuo","model","value","input1","callback","$$v","expression","slot","addinfo","_v","dialogVisible","$event","handleClose","ref","form","rules","rolename","$set","describe","status","data","defaultProps","confirmEdit","tableData","handleSelectionChange","scopedSlots","_u","key","fn","scope","_s","row","getNamesByIds","set_arr","powers","class","formatDate","lasttime","handleEdit","$index","handleDelete","handleStatus","pagesize","pagecount","handleSizeChange","handleCurrentChange","staticRenderFns","id","label","children","required","message","trigger","min","max","multipleSelection","search","mounted","GetRol","setRol","methods","SetStatusOFF","SetStatus","then","res","console","log","index","setRole","array","idsString","idsArray","split","map","parseInt","trim","matchedNames","forEach","item","includes","push","name","join","getCheckedKeys","$refs","tree","checkedKeysArray","checkedKeysString","obj","setCheckedKeys","$nextTick","updateRo","updateRole","msg","$message","type","error","catch","$confirm","confirmButtonText","cancelButtonText","splice","deleteRo","timestamp","milliseconds","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","deleteRole","toggleSelection","rows","multipleTable","toggleRowSelection","clearSelection","val","page","GetRoleList","pagelimit","Adduserinfo","Adduser","component"],"sourceRoot":""}